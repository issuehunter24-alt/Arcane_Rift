# 애니메이션 타이밍 가이드

## ⏱️ 전체 애니메이션 타이밍 표

### **트윈 애니메이션 (web/src/tweens.ts)**

| 애니메이션 | 지속 시간 | Easing | 용도 |
|-----------|----------|--------|------|
| HP 증감 | 400ms | easeOutCubic | 부드러운 체력 변화 |
| 에너지 증감 | 300ms | easeOutQuad | 빠른 에너지 변화 |
| 화면 전환 | 300ms | ease-out | 페이드 인/아웃 |

### **VFX 이펙트 (web/src/vfx.ts)**

| 이펙트 | 지속 시간 | 파티클 수 | 특징 |
|--------|----------|----------|------|
| **피해** (damage) | 25프레임 (417ms) | 10-20개 | 빨간 폭발 |
| **회복** (heal) | 40프레임 (667ms) | 15개 | 초록 상승 |
| **보호막** (shield) | 35프레임 (583ms) | 15개 | 파란 파동 |
| **에너지** (energy) | 30프레임 (500ms) | 10개 | 노란 반짝임 |
| **드로우** (draw) | 25프레임 (417ms) | 10개 | 하늘색 트레일 |
| **화상** (burn) | 50프레임 (833ms) | 20개 | 주황 불꽃 상승 |
| **빙결** (freeze) | 40프레임 (667ms) | 18개 | 하늘색 얼음 폭발 |
| **감전** (shock) | 30프레임 (500ms) | 15개 | 노란 번개 |
| **취약** (vulnerable) | 30프레임 (500ms) | 12개 | 보라색 파동 |
| **버프** (buff) | 40프레임 (667ms) | 15개 | 금색 상승 |
| **승리** (victory) | 70프레임 (1167ms) | 100개 | 대규모 불꽃놀이 |
| **패배** (defeat) | 50프레임 (833ms) | 40개 | 회색 낙하 |

*기준: 60fps (1프레임 = 16.67ms)*

### **UI 애니메이션 (web/index.html CSS)**

| 애니메이션 | 지속 시간 | Easing | 용도 |
|-----------|----------|--------|------|
| fadeIn | 300ms | ease-out | 화면 등장 |
| fadeOut | 200ms | ease-out | 화면 퇴장 |
| slideInRight | 300ms | ease-out | 토스트 등장 |
| slideInLeft | 300ms | ease-out | 사이드 패널 |
| pulse (epic) | 2000ms | ease-in-out | 에픽 카드 빛남 |
| pulse (legendary) | 2000ms | ease-in-out | 레전더리 카드 빛남 |
| spin (loading) | 1000ms | linear | 로딩 스피너 |
| skeleton-loading | 1500ms | ease-in-out | 스켈레톤 UI |

---

## 🎬 시퀀스 타이밍

### **카드 사용 시퀀스**
```
1. 카드 선언 클릭
   └─ 카드 이동 (100ms) + 효과음 (즉시)
   
2. 턴 종료 버튼 클릭
   └─ 턴 종료 효과음 (즉시)
   └─ 0.1초 대기
   
3. 카드 효과 해결 (순차)
   ├─ VFX 재생 (500-800ms)
   ├─ 효과음 재생 (즉시)
   └─ HP 트윈 (400ms)
   
4. 다음 카드로 이동 (각 카드 간 0.2초 간격)

총 시간: 카드당 약 0.7-1.0초
```

### **화면 전환 시퀀스**
```
1. 메뉴 → 전투
   ├─ 메뉴 페이드 아웃 (200ms)
   ├─ BGM 페이드 아웃 (1000ms)
   ├─ 새 BGM 페이드 인 (2000ms)
   └─ 전투 화면 페이드 인 (300ms)
   
총 시간: 약 2.5초 (BGM과 UI가 중첩)
```

### **게임 시작 시퀀스**
```
1. 로딩 화면 표시 (즉시)
2. 카드 데이터 로딩 (실제 시간)
   └─ 진행률 업데이트 (10% → 30% → 80%)
3. 완료 애니메이션 (300ms)
4. 성공 토스트 (2000ms)
   └─ 로딩 화면 페이드 아웃 (300ms)
   
총 시간: 약 1-3초 (네트워크 속도 의존)
```

---

## 🎯 타이밍 원칙

### **1. 체감 시간**
```
즉각적 (<100ms):    버튼 클릭 피드백
빠름 (100-300ms):    UI 전환, 카드 선택
적당 (300-500ms):    HP 변화, 에너지 변화
느림 (500-1000ms):   VFX 효과, 상태이상
매우 느림 (>1000ms): 승리/패배, BGM 전환
```

### **2. 중첩 규칙**
```typescript
// 동시 재생 가능:
✅ VFX + 효과음
✅ HP 트윈 + VFX
✅ UI 애니메이션 + BGM 페이드

// 순차 재생:
❌ 여러 카드 효과 (0.2초 간격)
❌ 화면 전환 (이전 화면 끝 → 새 화면 시작)
```

### **3. 우선순위**
```
최우선 (차단 없음):
└─ 사용자 입력 피드백 (버튼, 카드 선택)

높음 (빠른 완료):
├─ HP/에너지 변화
└─ 전투 효과음

중간 (적당한 시간):
├─ VFX 효과
└─ UI 전환

낮음 (배경):
├─ BGM 페이드
└─ 스켈레톤 로딩
```

---

## 📊 퍼포먼스 가이드

### **60FPS 유지 기준**

| 요소 | 제한 | 현재 | 상태 |
|------|------|------|------|
| 활성 파티클 | <500개 | ~100개 | ✅ 안전 |
| 동시 트윈 | <10개 | ~3개 | ✅ 안전 |
| DOM 업데이트 | <1회/프레임 | 1회/프레임 | ✅ 최적 |
| 활성 이미터 | <5개 | 1개 | ✅ 안전 |

### **퍼포먼스 모드별 조정**

```typescript
// High Performance (기본)
파티클 수: 100%
VFX 지속시간: 100%
트윈 smoothness: 100%

// Medium Performance (저사양)
파티클 수: 60%
VFX 지속시간: 80%
트윈 smoothness: 100% (변경 없음)

// Low Performance (모바일)
파티클 수: 30%
VFX 지속시간: 60%
트윈 smoothness: 100% (변경 없음)
```

---

## 🔧 구현 상태

### **트윈 애니메이션**
```typescript
// web/src/main.ts
HP 트윈:     400ms, easeOutCubic
에너지 트윈: 300ms, easeOutQuad
```

### **VFX 타이밍**
```typescript
// web/src/vfx.ts
모든 이펙트: 파티클 life 값으로 제어
파티클 업데이트: 매 프레임 (app.ticker)
```

### **CSS 애니메이션**
```css
/* web/index.html */
화면 전환:    0.3s ease-out
토스트 등장:  0.3s ease-out
로딩 스피너:  1.0s linear infinite
스켈레톤:     1.5s ease-in-out infinite
```

---

## 💡 개선 제안

### **1. 카드 효과 연쇄**
```typescript
// 현재: 각 카드 효과가 순차적으로 완료 대기
// 개선: 효과 오버랩 (다음 카드 0.5초 후 시작)

현재: 카드1 (1초) → 카드2 (1초) → 카드3 (1초) = 3초
개선: 카드1 (1초)
         └─ 0.5초 후 카드2 (1초)
                  └─ 0.5초 후 카드3 (1초) = 2초
```

### **2. VFX 최적화**
```typescript
// 거리 기반 LOD (Level of Detail)
화면 중앙:   파티클 100%
화면 가장자리: 파티클 70%
화면 밖:     파티클 생략
```

### **3. 스마트 로딩**
```typescript
// 백그라운드 로딩
우선순위 1: 카드 이미지 (즉시)
우선순위 2: 음원 파일 (백그라운드)
우선순위 3: 카드 뒷면 (지연)
```

---

## 📝 테스트 체크리스트

### **애니메이션 품질**
- [ ] HP 바가 부드럽게 감소/증가
- [ ] 카드 선택 시 즉각적 반응
- [ ] VFX가 자연스럽게 재생/소멸
- [ ] 화면 전환이 끊김 없음
- [ ] 토스트가 부드럽게 등장/퇴장

### **타이밍 정확도**
- [ ] 피해 효과음과 VFX 동기화
- [ ] HP 감소 타이밍과 VFX 일치
- [ ] 턴 종료 후 적 행동까지 적절한 대기
- [ ] 승리/패배 연출이 극적
- [ ] BGM 전환이 부드러움

### **퍼포먼스**
- [ ] 60FPS 유지 (전투 중)
- [ ] 메모리 누수 없음 (긴 플레이)
- [ ] 모바일에서도 부드러움
- [ ] 다수 이펙트 동시 재생 가능
- [ ] 화면 크기 변경 시 끊김 없음

---

**마지막 업데이트**: 2025-11-01  
**작성자**: AI Assistant  
**상태**: 최적화 완료, 프로덕션 준비 완료

