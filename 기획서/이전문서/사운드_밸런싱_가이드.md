# 사운드 밸런싱 가이드

## 🎵 현재 볼륨 설정

### **기본 설정**
```typescript
마스터 볼륨: 70% (0.7)
BGM 볼륨:    50% (0.5)
SFX 볼륨:    80% (0.8)
```

---

## 🎼 BGM 볼륨 밸런싱

| BGM 파일 | 재생 위치 | 권장 볼륨 | 특징 |
|----------|-----------|----------|------|
| `bgm_menu.mp3` | 메인 메뉴/덱 편집 | 0.5 | 차분한 배경음악 |
| `bgm_battle.mp3` | 전투/캠페인 | 0.6 | 긴장감 있는 전투음악 (약간 높게) |
| `bgm_shop.mp3` | 상점 | 0.4 | 편안한 쇼핑 분위기 (약간 낮게) |
| `bgm_victory.mp3` | 승리 징글 | 0.7 | 짧고 화려한 축하 (높게) |

### **페이드 효과**
- 페이드 인: 2초 (부드러운 시작)
- 페이드 아웃: 1초 (빠른 종료)
- 화면 전환 시: 자동 페이드 적용

---

## 🔊 SFX 볼륨 밸런싱

### **전투 효과음 (중요도: 높음)**
| SFX | 볼륨 | 타이밍 | 비고 |
|-----|------|--------|------|
| `damage.mp3` | 0.8 | 피해 발생 즉시 | 가장 중요한 피드백 |
| `heal.mp3` | 0.7 | 회복 발생 즉시 | 긍정적 피드백 |
| `shield.mp3` | 0.6 | 보호막 획득 시 | 방어적 느낌 |
| `critical.mp3` | 1.0 | 치명타 시 | 특별한 순간 강조 |

### **상태이상 효과음 (중요도: 중간)**
| SFX | 볼륨 | 타이밍 | 비고 |
|-----|------|--------|------|
| `burn.mp3` | 0.6 | 화상 적용 시 | 지속적 느낌 |
| `freeze.mp3` | 0.6 | 빙결 적용 시 | 차가운 느낌 |
| `shock.mp3` | 0.7 | 감전 적용 시 | 날카로운 느낌 |

### **카드 조작 효과음 (중요도: 낮음)**
| SFX | 볼륨 | 타이밍 | 비고 |
|-----|------|--------|------|
| `card_play.mp3` | 0.5-0.6 | 카드 선언/취소 시 | 선언: 0.6, 취소: 0.4 |
| `card_draw.mp3` | 0.5 | 카드 드로우 시 | 빠른 슁~ |
| `card_shuffle.mp3` | 0.4 | 덱 셔플 시 | 배경 효과 |

### **UI 인터랙션 (중요도: 낮음)**
| SFX | 볼륨 | 타이밍 | 비고 |
|-----|------|--------|------|
| `button_click.mp3` | 0.5-0.6 | 버튼 클릭 시 | 일반 버튼 |
| `menu_open.mp3` | 0.4 | 화면 전환 시 | 부드러운 전환 |
| `turn_end.mp3` | 0.8 | 턴 종료 시 | 명확한 구분 |

### **게임 상태 (중요도: 최고)**
| SFX | 볼륨 | 타이밍 | 비고 |
|-----|------|--------|------|
| `victory.mp3` | 1.0 | 승리 시 | 최대 볼륨 |
| `defeat.mp3` | 1.0 | 패배 시 | 최대 볼륨 |
| `level_up.mp3` | 0.9 | 레벨업 시 | 축하 느낌 |

---

## 🎚️ 믹싱 원칙

### **1. 레이어링**
```
최상위 레이어 (100%):
└─ 게임 상태 효과음 (victory, defeat)

상위 레이어 (80-90%):
├─ 전투 효과음 (damage, heal)
└─ 턴 전환 효과음 (turn_end)

중간 레이어 (60-70%):
├─ 상태이상 효과음 (burn, freeze, shock)
└─ UI 버튼 (중요한 액션)

하위 레이어 (40-50%):
├─ 카드 조작 효과음
└─ 배경 UI 효과음
```

### **2. 동시 재생 제한**
```typescript
// 같은 카테고리 효과음은 중복 방지
- 피해 효과음: 0.1초 간격 제한
- 카드 효과음: 0.05초 간격 제한
- 버튼 효과음: 즉시 재생 가능
```

### **3. 상황별 볼륨 조절**
```typescript
// 전투 중: BGM 낮춤 (-10%)
전투 BGM 볼륨: 0.6 → 0.5 (효과음 강조)

// 중요한 순간: SFX 강조 (+20%)
승리/패배: 1.0 (최대 볼륨)

// 평시: 균형있게
메뉴 BGM: 0.5, 버튼 SFX: 0.5
```

---

## 🎛️ 사용자 설정

### **기본 프리셋**
```typescript
// 균형잡힌 설정 (기본)
마스터: 70%
BGM:    50%
SFX:    80%

// 조용한 설정
마스터: 40%
BGM:    30%
SFX:    50%

// 시끄러운 설정
마스터: 100%
BGM:    80%
SFX:    100%
```

### **localStorage 저장**
```typescript
{
  "masterVolume": 0.7,
  "bgmVolume": 0.5,
  "sfxVolume": 0.8,
  "muted": false
}
```

---

## 📊 테스트 체크리스트

### **BGM 테스트**
- [ ] 메뉴 진입 시 부드러운 페이드 인
- [ ] 전투 진입 시 BGM 전환 (페이드 아웃 → 페이드 인)
- [ ] 상점 진입 시 BGM 볼륨 적절
- [ ] 승리 시 BGM 정지 후 징글 재생
- [ ] 루프 재생 시 끊김 없음

### **SFX 테스트**
- [ ] 피해 효과음이 명확하게 들림
- [ ] 카드 선언 시 효과음 재생
- [ ] 턴 종료 시 명확한 구분음
- [ ] 승리/패배 시 강렬한 효과음
- [ ] 여러 효과음 동시 재생 시 겹침 없음

### **볼륨 밸런스**
- [ ] BGM이 SFX를 가리지 않음
- [ ] SFX가 너무 시끄럽지 않음
- [ ] 전투 중 BGM과 SFX 균형
- [ ] 음소거 기능 정상 동작
- [ ] 볼륨 슬라이더 즉시 반영

---

## 🔧 구현 상태

### **현재 적용된 볼륨**
```typescript
// web/src/main.ts - VFX 콜백
damage:   0.8  // 피해
heal:     0.7  // 회복
shield:   0.6  // 보호막
burn:     0.6  // 화상
freeze:   0.6  // 빙결
shock:    0.7  // 감전
card_draw:    0.5  // 카드 드로우
card_play:    0.5-0.6  // 카드 선언 (선언: 0.6, 취소: 0.4)
victory:      1.0  // 승리
defeat:       1.0  // 패배
button_click: 0.5-0.6  // 버튼
menu_open:    0.4  // 화면 전환
turn_end:     0.8  // 턴 종료
```

### **BGM 전환 로직**
```typescript
// web/src/main.ts - updateScreenVisibility
menu/deck-editor → bgm_menu (페이드 인 2초)
battle/campaign  → bgm_battle (페이드 인 2초)
shop             → bgm_shop (페이드 인 2초)
```

---

## 💡 추가 개선 제안

### **1. 거리 감쇠 (Distance Attenuation)**
```typescript
// 플레이어 카드 효과음: 100%
// 적 카드 효과음: 80% (약간 멀리)
```

### **2. 상황별 BGM 속도 조절**
```typescript
// 위급 상황 (HP < 30%): BGM 속도 +10%
// 압도적 우세: BGM 속도 -10%
```

### **3. 다이나믹 믹싱**
```typescript
// 효과음 많을 때: BGM 볼륨 자동 감소 (-20%)
// 조용할 때: BGM 볼륨 원상 복구
```

---

**마지막 업데이트**: 2025-11-01  
**작성자**: AI Assistant  
**상태**: 코드 구현 완료, 음원 파일 대기 중

